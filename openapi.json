{"openapi":"3.0.0","info":{"title":"Beni Mono API","version":"1.0.0","description":"Comprehensive API documentation for Beni Mono backend"},"servers":[{"url":"http://localhost:3000/api","description":"Local server"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"Tenant":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier","example":"c123456789"},"name":{"type":"string","description":"Tenant name","example":"My Organization"},"slug":{"type":"string","description":"Unique slug","example":"my-organization"},"logoUrl":{"type":"string","nullable":true,"description":"URL to logo image","example":"https://example.com/logo.png"},"description":{"type":"string","nullable":true,"example":"Description of the organization"},"contactEmail":{"type":"string","nullable":true,"format":"email","example":"contact@example.com"},"contactPhone":{"type":"string","nullable":true,"example":"+1234567890"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"ownerId":{"type":"string","description":"ID of the owner user","example":"user123"}},"required":["id","name","slug","ownerId"]},"User":{"type":"object","properties":{"id":{"type":"string","example":"user123"},"email":{"type":"string","format":"email","example":"user@example.com"},"username":{"type":"string","nullable":true,"example":"username1"},"fullName":{"type":"string","nullable":true,"example":"John Doe"},"phone":{"type":"string","nullable":true,"example":"+1234567890"},"avatarUrl":{"type":"string","nullable":true,"example":"https://example.com/avatar.png"},"gender":{"type":"string","nullable":true,"enum":["MALE","FEMALE","OTHER"]},"birthdate":{"type":"string","format":"date","nullable":true},"bio":{"type":"string","nullable":true},"location":{"type":"object","nullable":true},"social":{"type":"object","nullable":true},"isEmailVerified":{"type":"boolean"},"isPhoneVerified":{"type":"boolean"},"lastLoginAt":{"type":"string","format":"date-time","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","email","isEmailVerified","isPhoneVerified","createdAt","updatedAt"]},"Product":{"type":"object","properties":{"id":{"type":"string","example":"prod123"},"name":{"type":"string","example":"Sample Hotel"},"description":{"type":"string","nullable":true},"category":{"type":"string","example":"hotel"},"subCategory":{"type":"string","nullable":true},"type":{"type":"string","enum":["HOTEL","ACCOMMODATION","TOUR","ACTIVITY","OTHER"]},"province":{"type":"string","example":"Tehran"},"city":{"type":"string","example":"Tehran"},"address":{"type":"string","nullable":true},"locationLat":{"type":"number","nullable":true},"locationLng":{"type":"number","nullable":true},"availableQty":{"type":"integer"},"reservedQty":{"type":"integer"},"price":{"type":"integer"},"discount":{"type":"integer","nullable":true},"finalPrice":{"type":"integer"},"isActive":{"type":"boolean"},"isSuspended":{"type":"boolean"},"createdById":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"images":{"type":"array","items":{"type":"string"},"nullable":true}},"required":["id","name","category","type","province","city","availableQty","reservedQty","price","finalPrice","isActive","isSuspended","createdById","createdAt","updatedAt"]},"Reservation":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"productId":{"type":"string"},"quantity":{"type":"integer"},"status":{"type":"string","enum":["PENDING","PAID","CANCELLED","FAILED","EXPIRED","ON_HOLD"]},"paymentId":{"type":"string","nullable":true},"paymentMethod":{"type":"string","nullable":true},"paymentStatus":{"type":"string","enum":["PAID","UNPAID","FAILED","REFUNDED","WAITING"]},"paidAt":{"type":"string","format":"date-time","nullable":true},"cancelledAt":{"type":"string","format":"date-time","nullable":true},"startDate":{"type":"string","format":"date-time","nullable":true},"endDate":{"type":"string","format":"date-time","nullable":true},"notes":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"tripId":{"type":"string","nullable":true}},"required":["id","userId","productId","quantity","status","paymentStatus","createdAt","updatedAt"]},"Subscription":{"type":"object","properties":{"id":{"type":"string"},"tenantId":{"type":"string"},"planId":{"type":"string"},"startedAt":{"type":"string","format":"date-time"},"expiresAt":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["ACTIVE","EXPIRED","CANCELLED"]},"renewalEnabled":{"type":"boolean"},"paymentMethod":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","tenantId","planId","startedAt","expiresAt","status","renewalEnabled","createdAt","updatedAt"]},"ApiKey":{"type":"object","properties":{"id":{"type":"string"},"key":{"type":"string"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"expiresAt":{"type":"string","format":"date-time","nullable":true},"revokedAt":{"type":"string","format":"date-time","nullable":true},"isActive":{"type":"boolean"},"ipWhitelist":{"type":"array","items":{"type":"string"}},"metadata":{"type":"object","nullable":true},"createdById":{"type":"string"},"tenantId":{"type":"string"}},"required":["id","key","name","createdAt","updatedAt","isActive","ipWhitelist","createdById","tenantId"]},"Role":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"isGlobal":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","isGlobal","createdAt","updatedAt"]},"Permission":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"action":{"type":"string"},"resource":{"type":"string"},"description":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","action","resource","createdAt","updatedAt"]},"Payment":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"amount":{"type":"integer"},"currency":{"type":"string"},"status":{"type":"string","enum":["PENDING","SUCCESS","FAILED","CANCELED","EXPIRED"]},"provider":{"type":"string","enum":["ZARINPAL","IDPAY","STRIPE","PAYPAL","MANUAL"]},"referenceId":{"type":"string","nullable":true},"authorityCode":{"type":"string","nullable":true},"trackingCode":{"type":"string","nullable":true},"purpose":{"type":"string","enum":["SUBSCRIPTION","PRODUCT","TRIP_RESERVATION","DONATION"]},"targetId":{"type":"string","nullable":true},"description":{"type":"string","nullable":true},"isVerified":{"type":"boolean"},"verifiedAt":{"type":"string","format":"date-time","nullable":true},"failedAt":{"type":"string","format":"date-time","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","userId","amount","currency","status","provider","purpose","isVerified","createdAt","updatedAt"]},"Invoice":{"type":"object","properties":{"id":{"type":"string"},"tenantId":{"type":"string"},"amount":{"type":"integer"},"currency":{"type":"string"},"status":{"type":"string"},"issuedAt":{"type":"string","format":"date-time"},"paidAt":{"type":"string","format":"date-time","nullable":true},"dueDate":{"type":"string","format":"date-time"},"description":{"type":"string","nullable":true},"referenceId":{"type":"string","nullable":true},"gateway":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","tenantId","amount","currency","status","issuedAt","dueDate","createdAt","updatedAt"]}}},"security":[{"bearerAuth":[]}],"paths":{"/2fa/enable":{"post":{"summary":"Enable two-factor authentication","tags":["2FA"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"method":{"type":"string","example":"email"}}}}}},"responses":{"200":{"description":"2FA enabled","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"2FA enabled"}}}}}}}}},"/apikey/{tenantId}/api-keys":{"post":{"summary":"Create API key for tenant","tags":["APIKey"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"My API Key"}}}}}},"responses":{"201":{"description":"API key created","content":{"application/json":{"schema":{"type":"object","properties":{"apiKey":{"$ref":"#/components/schemas/ApiKey"}}}}}}}},"get":{"summary":"List API keys of tenant","tags":["APIKey"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of API keys","content":{"application/json":{"schema":{"type":"object","properties":{"apiKeys":{"type":"array","items":{"$ref":"#/components/schemas/ApiKey"}}}}}}}}}},"/apikey/{tenantId}/api-keys/{apiKeyId}":{"put":{"summary":"Update API key details","tags":["APIKey"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}},{"in":"path","name":"apiKeyId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Updated API Key"}}}}}},"responses":{"200":{"description":"Updated API key","content":{"application/json":{"schema":{"type":"object","properties":{"apiKey":{"$ref":"#/components/schemas/ApiKey"}}}}}}}},"delete":{"summary":"Revoke/delete API key","tags":["APIKey"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}},{"in":"path","name":"apiKeyId","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"API key revoked/deleted"}}}},"/auth/register":{"post":{"summary":"Register a new user","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"password":{"type":"string","example":"password123"},"fullName":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890"}}}}}},"responses":{"201":{"description":"User registered, OTP sent","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Verification code sent"},"user":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"}}}}}}}}}}},"/auth/login":{"post":{"summary":"Login with email and password","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"password":{"type":"string","example":"password123"}}}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"}}}}}}}}}}},"/auth/logout":{"post":{"summary":"Logout user","tags":["Auth"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Logout successful","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Logged out"}}}}}}}}},"/auth/me":{"get":{"summary":"Get current authenticated user profile","tags":["Auth"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"User profile","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"}}}}}}}}},"/auth/forgot-password":{"post":{"summary":"Request password reset","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"}}}}}},"responses":{"200":{"description":"Password reset requested","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Password reset email sent"}}}}}}}}},"/auth/request-email-verification":{"post":{"summary":"Request email verification","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"}}}}}},"responses":{"200":{"description":"Email verification requested","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Verification email sent"}}}}}}}}},"/auth/verify-email":{"post":{"summary":"Verify email address","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"code":{"type":"string","example":123456}}}}}},"responses":{"200":{"description":"Email verified","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Email verified"}}}}}}}}},"/auth/request-mobile-verification":{"post":{"summary":"Request mobile verification","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"phone":{"type":"string","example":"+1234567890"}}}}}},"responses":{"200":{"description":"Mobile verification requested","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Verification SMS sent"}}}}}}}}},"/auth/verify-mobile":{"post":{"summary":"Verify mobile number","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"phone":{"type":"string","example":"+1234567890"},"code":{"type":"string","example":123456}}}}}},"responses":{"200":{"description":"Mobile verified","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Mobile verified"}}}}}}}}},"/auth/verify-registration":{"post":{"summary":"Verify registration (OTP)","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"code":{"type":"string","example":123456}}}}}},"responses":{"200":{"description":"Registration verified","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Registration complete"}}}}}}}}},"/auth/google":{"get":{"summary":"Google OAuth login","tags":["Auth"],"responses":{"302":{"description":"Redirect to Google OAuth"}}}},"/auth/google/callback":{"get":{"summary":"Google OAuth callback","tags":["Auth"],"responses":{"200":{"description":"Google OAuth login success"}}}},"/auth/github":{"get":{"summary":"GitHub OAuth login","tags":["Auth"],"responses":{"302":{"description":"Redirect to GitHub OAuth"}}}},"/auth/github/callback":{"get":{"summary":"GitHub OAuth callback","tags":["Auth"],"responses":{"200":{"description":"GitHub OAuth login success"}}}},"/logs/login":{"get":{"summary":"Retrieve user login logs","tags":["Logs"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of login logs","content":{"application/json":{"schema":{"type":"object","properties":{"logs":{"type":"array","items":{"$ref":"#/components/schemas/LoginLog"}}}}}}}}}},"/logs/audit":{"get":{"summary":"Retrieve audit logs","tags":["Logs"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"tenantId","schema":{"type":"string"},"required":false}],"responses":{"200":{"description":"List of audit logs","content":{"application/json":{"schema":{"type":"object","properties":{"logs":{"type":"array","items":{"$ref":"#/components/schemas/AuditLog"}}}}}}}}}},"/logs/api-usage":{"get":{"summary":"Get logs of API usage","tags":["Logs"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"tenantId","schema":{"type":"string"},"required":false}],"responses":{"200":{"description":"List of API usage logs","content":{"application/json":{"schema":{"type":"object","properties":{"logs":{"type":"array","items":{"$ref":"#/components/schemas/ApiUsageLog"}}}}}}}}}},"/payment/initiate":{"post":{"summary":"Initiate a new payment","tags":["Payment"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"amount":{"type":"integer","example":100000},"purpose":{"type":"string","example":"PRODUCT"},"targetId":{"type":"string","example":"product123"}}}}}},"responses":{"201":{"description":"Payment initiated","content":{"application/json":{"schema":{"type":"object","properties":{"payment":{"$ref":"#/components/schemas/Payment"}}}}}}}}},"/payment/{paymentId}":{"get":{"summary":"Get payment status and details","tags":["Payment"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"paymentId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Payment details","content":{"application/json":{"schema":{"type":"object","properties":{"payment":{"$ref":"#/components/schemas/Payment"}}}}}}}}},"/payment/{paymentId}/confirm":{"post":{"summary":"Confirm a payment","tags":["Payment"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"paymentId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Payment confirmed","content":{"application/json":{"schema":{"type":"object","properties":{"payment":{"$ref":"#/components/schemas/Payment"}}}}}}}}},"/payment/{paymentId}/refund":{"post":{"summary":"Refund a payment","tags":["Payment"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"paymentId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Payment refunded","content":{"application/json":{"schema":{"type":"object","properties":{"payment":{"$ref":"#/components/schemas/Payment"}}}}}}}}},"/product":{"post":{"summary":"Create a new product","tags":["Product"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Sample Hotel"},"category":{"type":"string","example":"hotel"},"type":{"type":"string","example":"HOTEL"},"province":{"type":"string","example":"Tehran"},"city":{"type":"string","example":"Tehran"},"price":{"type":"integer","example":1000000}}}}}},"responses":{"201":{"description":"Product created","content":{"application/json":{"schema":{"type":"object","properties":{"product":{"$ref":"#/components/schemas/Product"}}}}}}}},"get":{"summary":"List all products","tags":["Product"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of products","content":{"application/json":{"schema":{"type":"object","properties":{"products":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}}}},"/product/{productId}":{"get":{"summary":"Get product details","tags":["Product"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"productId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Product details","content":{"application/json":{"schema":{"type":"object","properties":{"product":{"$ref":"#/components/schemas/Product"}}}}}}}},"put":{"summary":"Update a product","tags":["Product"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"productId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Updated Hotel"}}}}}},"responses":{"200":{"description":"Updated product","content":{"application/json":{"schema":{"type":"object","properties":{"product":{"$ref":"#/components/schemas/Product"}}}}}}}},"delete":{"summary":"Delete a product","tags":["Product"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"productId","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Product deleted"}}}},"/rbac/roles":{"get":{"summary":"List all roles","tags":["RBAC"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of roles","content":{"application/json":{"schema":{"type":"object","properties":{"roles":{"type":"array","items":{"$ref":"#/components/schemas/Role"}}}}}}}}},"post":{"summary":"Create a new role","tags":["RBAC"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Admin"}}}}}},"responses":{"201":{"description":"Role created","content":{"application/json":{"schema":{"type":"object","properties":{"role":{"$ref":"#/components/schemas/Role"}}}}}}}}},"/rbac/roles/{roleId}":{"put":{"summary":"Update a role","tags":["RBAC"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"roleId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Updated Role"}}}}}},"responses":{"200":{"description":"Updated role","content":{"application/json":{"schema":{"type":"object","properties":{"role":{"$ref":"#/components/schemas/Role"}}}}}}}},"delete":{"summary":"Delete a role","tags":["RBAC"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"roleId","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Role deleted"}}}},"/reservation":{"post":{"summary":"Create a new reservation","tags":["Reservation"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"productId":{"type":"string","example":"product123"},"quantity":{"type":"integer","example":2}}}}}},"responses":{"201":{"description":"Reservation created","content":{"application/json":{"schema":{"type":"object","properties":{"reservation":{"$ref":"#/components/schemas/Reservation"}}}}}}}},"get":{"summary":"List reservations","tags":["Reservation"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of reservations","content":{"application/json":{"schema":{"type":"object","properties":{"reservations":{"type":"array","items":{"$ref":"#/components/schemas/Reservation"}}}}}}}}}},"/reservation/{reservationId}":{"get":{"summary":"Get reservation details","tags":["Reservation"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"reservationId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Reservation details","content":{"application/json":{"schema":{"type":"object","properties":{"reservation":{"$ref":"#/components/schemas/Reservation"}}}}}}}},"put":{"summary":"Update a reservation","tags":["Reservation"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"reservationId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"PAID"}}}}}},"responses":{"200":{"description":"Updated reservation","content":{"application/json":{"schema":{"type":"object","properties":{"reservation":{"$ref":"#/components/schemas/Reservation"}}}}}}}},"delete":{"summary":"Delete a reservation","tags":["Reservation"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"reservationId","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Reservation deleted"}}}},"/sessions":{"get":{"summary":"List active user sessions","tags":["Session"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of sessions","content":{"application/json":{"schema":{"type":"object","properties":{"sessions":{"type":"array","items":{"$ref":"#/components/schemas/Session"}}}}}}}}}},"/subscription/{tenantId}/subscriptions":{"get":{"summary":"List tenant subscriptions","tags":["Subscription"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of subscriptions","content":{"application/json":{"schema":{"type":"object","properties":{"subscriptions":{"type":"array","items":{"$ref":"#/components/schemas/Subscription"}}}}}}}}}},"/subscription/{tenantId}/invoices":{"get":{"summary":"Get invoices related to tenant","tags":["Subscription"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of invoices","content":{"application/json":{"schema":{"type":"object","properties":{"invoices":{"type":"array","items":{"$ref":"#/components/schemas/Invoice"}}}}}}}}}},"/subscription/{tenantId}/usage":{"get":{"summary":"Get API and service usage records for tenant","tags":["Subscription"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Usage records","content":{"application/json":{"schema":{"type":"object","properties":{"usage":{"type":"array","items":{"$ref":"#/components/schemas/UsageRecord"}}}}}}}}}},"/tenant":{"post":{"summary":"Create a new tenant (organization)","tags":["Tenant"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"My Organization"}}}}}},"responses":{"201":{"description":"Tenant created","content":{"application/json":{"schema":{"type":"object","properties":{"tenant":{"$ref":"#/components/schemas/Tenant"}}}}}}}},"get":{"summary":"List all tenants user belongs to","tags":["Tenant"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of tenants","content":{"application/json":{"schema":{"type":"object","properties":{"tenants":{"type":"array","items":{"$ref":"#/components/schemas/Tenant"}}}}}}}}}},"/tenant/{tenantId}":{"get":{"summary":"Get tenant details","tags":["Tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant details","content":{"application/json":{"schema":{"type":"object","properties":{"tenant":{"$ref":"#/components/schemas/Tenant"}}}}}}}},"put":{"summary":"Update tenant information","tags":["Tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Updated Org"}}}}}},"responses":{"200":{"description":"Updated tenant","content":{"application/json":{"schema":{"type":"object","properties":{"tenant":{"$ref":"#/components/schemas/Tenant"}}}}}}}},"delete":{"summary":"Delete a tenant","tags":["Tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tenantId","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Tenant deleted"}}}},"/user/me":{"get":{"summary":"Get current user profile","tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"User profile","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string","example":"+1234567890"}}}}}}}},"put":{"summary":"Update current user profile","tags":["User"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"fullName":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890"}}}}}},"responses":{"200":{"description":"Updated user profile","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"phone":{"type":"string"}}}}}}}},"delete":{"summary":"Delete current user profile","tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"User deleted"}}}},"/webhooks":{"get":{"summary":"List all webhooks for tenant","tags":["Webhook"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of webhooks","content":{"application/json":{"schema":{"type":"object","properties":{"webhooks":{"type":"array","items":{"$ref":"#/components/schemas/Webhook"}}}}}}}}},"post":{"summary":"Create a new webhook","tags":["Webhook"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","example":"https://example.com/webhook"},"eventTypes":{"type":"array","items":{"type":"string"},"example":["payment.succeeded"]}}}}}},"responses":{"201":{"description":"Webhook created","content":{"application/json":{"schema":{"type":"object","properties":{"webhook":{"$ref":"#/components/schemas/Webhook"}}}}}}}}},"/webhooks/{webhookId}":{"put":{"summary":"Update webhook details","tags":["Webhook"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"webhookId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","example":"https://example.com/webhook"},"eventTypes":{"type":"array","items":{"type":"string"},"example":["payment.succeeded"]}}}}}},"responses":{"200":{"description":"Updated webhook","content":{"application/json":{"schema":{"type":"object","properties":{"webhook":{"$ref":"#/components/schemas/Webhook"}}}}}}}},"delete":{"summary":"Delete a webhook","tags":["Webhook"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"webhookId","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Webhook deleted"}}}},"/webhooks/{webhookId}/deliveries":{"get":{"summary":"View webhook delivery attempts","tags":["Webhook"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"webhookId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of webhook deliveries","content":{"application/json":{"schema":{"type":"object","properties":{"deliveries":{"type":"array","items":{"$ref":"#/components/schemas/WebhookDelivery"}}}}}}}}}}},"tags":[]}